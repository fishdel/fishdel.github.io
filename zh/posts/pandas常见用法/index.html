<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>PandasåŸºæœ¬ç”¨æ³• | Yuuuuu&#39;s Blog</title>
<meta name="keywords" content="Machine learning">
<meta name="description" content="1.æ•°æ®å¯¼å…¥
df=pd.read_csv(&#39;Pokemon.csv&#39;,encoding=&#34;ISO-8859-1&#34;)
df.head()
2.æŸ¥çœ‹æ•°æ®
df.shape
df.shape[0]
df.shape[1]
df.columns #åˆ—å
df.index #è¡Œå
df.dtypes
df.head()
df.tail()
df.sample()
df.describe()
pd.set_option(&#39;max_colwidth&#39;,8) #è®¾ç½®æ¯ä¸€è¡Œçš„æœ€å¤§å®½åº¦ï¼Œæ¢å¤åŸè®¾ç½®æ–¹æ³•
pd.reset_option(&#39;max_colwidth&#39;)
locæ“ä½œä¸iloc
locé€šè¿‡labelå®šä½ï¼›ilocé€šè¿‡positionå®šä½
df.loc[[0,5],[&#39;åç§°&#39;,&#39;ç”Ÿå‘½ç‚¹æ•°&#39;]]
df.iloc[0:10,[0,1]]
df[:3]
3.æ•°æ®ç­›é€‰ä¸æ“ä½œ
df[df[&#39;ç»¼åˆèƒ½åŠ›&#39;]&gt;400].head()
df[df[&#39;ä¸–ä»£æ•°&#39;]==1]
df.insert(4,&#39;èƒ½åŠ›600&#39;,df[&#39;ç»¼åˆèƒ½åŠ›&#39;]&gt;=600)
4.è¯»å–æ•°æ®
pickleæ–‡ä»¶ï¼Œå¯ä»¥å°†pythonä¸­çš„æ•°æ®ç±»å‹è¿›è¡Œåºåˆ—åŒ–
compressionå‚æ•°æŒ‡å®šäº†å‹ç¼©ç±»å‹ï¼Œ&lsquo;zip&rsquo;, &lsquo;gzip&rsquo;, &lsquo;bz2&rsquo;, &lsquo;zstd&rsquo;">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/zh/posts/pandas%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css" integrity="sha256-1vzSCk&#43;4bvpN&#43;sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon.png">
<link rel="apple-touch-icon" href="http://localhost:1313/favicon.png">
<link rel="mask-icon" href="http://localhost:1313/favicon.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/zh/posts/pandas%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/zh/" accesskey="h" title="Yuuuuu&#39;s Blog (Alt + H)">Yuuuuu&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/zh/" title="ğŸ ä¸»é¡µ">
                    <span>ğŸ ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/zh/posts/" title="ğŸ“šæ–‡ç« ">
                    <span>ğŸ“šæ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/zh/archives/" title="â±æ—¶é—´è½´">
                    <span>â±æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/zh/tags/" title="ğŸ”–æ ‡ç­¾">
                    <span>ğŸ”–æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/zh/categories/" title="ğŸ§©åˆ†ç±»">
                    <span>ğŸ§©åˆ†ç±»</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/zh/search/" title="ğŸ”æœç´¢">
                    <span>ğŸ”æœç´¢</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/zh/about/" title="ğŸ™‹ğŸ»â€â™‚ï¸å…³äº">
                    <span>ğŸ™‹ğŸ»â€â™‚ï¸å…³äº</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      PandasåŸºæœ¬ç”¨æ³•
    </h1>
    <div class="post-meta"><span title='2022-05-20 22:11:08 +0800 CST'>äº”æœˆ 20, 2022</span>

</div>
  </header> 
  <div class="post-content"><h3 id="1æ•°æ®å¯¼å…¥">1.æ•°æ®å¯¼å…¥<a hidden class="anchor" aria-hidden="true" href="#1æ•°æ®å¯¼å…¥">#</a></h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;Pokemon.csv&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;ISO-8859-1&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></span></code></pre></div><h3 id="2æŸ¥çœ‹æ•°æ®">2.æŸ¥çœ‹æ•°æ®<a hidden class="anchor" aria-hidden="true" href="#2æŸ¥çœ‹æ•°æ®">#</a></h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">df</span><span class="o">.</span><span class="n">shape</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="c1">#åˆ—å</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="c1">#è¡Œå</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;max_colwidth&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span> <span class="c1">#è®¾ç½®æ¯ä¸€è¡Œçš„æœ€å¤§å®½åº¦ï¼Œæ¢å¤åŸè®¾ç½®æ–¹æ³•</span>
</span></span><span class="line"><span class="cl"><span class="n">pd</span><span class="o">.</span><span class="n">reset_option</span><span class="p">(</span><span class="s1">&#39;max_colwidth&#39;</span><span class="p">)</span>
</span></span></code></pre></div><p>locæ“ä½œä¸iloc
locé€šè¿‡labelå®šä½ï¼›ilocé€šè¿‡positionå®šä½</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="s1">&#39;åç§°&#39;</span><span class="p">,</span><span class="s1">&#39;ç”Ÿå‘½ç‚¹æ•°&#39;</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
</span></span></code></pre></div><h3 id="3æ•°æ®ç­›é€‰ä¸æ“ä½œ">3.æ•°æ®ç­›é€‰ä¸æ“ä½œ<a hidden class="anchor" aria-hidden="true" href="#3æ•°æ®ç­›é€‰ä¸æ“ä½œ">#</a></h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;ç»¼åˆèƒ½åŠ›&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">400</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;ä¸–ä»£æ•°&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="s1">&#39;èƒ½åŠ›600&#39;</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;ç»¼åˆèƒ½åŠ›&#39;</span><span class="p">]</span><span class="o">&gt;=</span><span class="mi">600</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="4è¯»å–æ•°æ®">4.è¯»å–æ•°æ®<a hidden class="anchor" aria-hidden="true" href="#4è¯»å–æ•°æ®">#</a></h3>
<p>pickleæ–‡ä»¶ï¼Œå¯ä»¥å°†pythonä¸­çš„æ•°æ®ç±»å‹è¿›è¡Œåºåˆ—åŒ–
compressionå‚æ•°æŒ‡å®šäº†å‹ç¼©ç±»å‹ï¼Œ&lsquo;zip&rsquo;, &lsquo;gzip&rsquo;, &lsquo;bz2&rsquo;, &lsquo;zstd&rsquo;</p>
<pre tabindex="0"><code>pandas.read_pickle(filepath_or_buffer, compression=&#39;infer&#39;, storage_options=None)
</code></pre><h3 id="5å¤„ç†æ•°æ®">5.å¤„ç†æ•°æ®<a hidden class="anchor" aria-hidden="true" href="#5å¤„ç†æ•°æ®">#</a></h3>
<h4 id="1å–ç‰¹å®šçš„è¡Œåˆ—">ï¼ˆ1ï¼‰å–ç‰¹å®šçš„è¡Œåˆ—<a hidden class="anchor" aria-hidden="true" href="#1å–ç‰¹å®šçš„è¡Œåˆ—">#</a></h4>
<p>åˆ©ç”¨æ ‡ç­¾å–åˆ—ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">data</span><span class="p">[</span><span class="s1">&#39;xxx&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">data</span><span class="o">.</span><span class="n">at</span> <span class="c1">#è®¿é—®å•ä¸ªå€¼</span>
</span></span><span class="line"><span class="cl"><span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;è¡Œå&#39;</span><span class="p">,</span><span class="s1">&#39;åˆ—å&#39;</span><span class="p">]</span> <span class="c1">#è®¿é—®å€¼ç»„</span>
</span></span><span class="line"><span class="cl"><span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="s1">&#39;Aè¡Œ&#39;</span><span class="p">,</span><span class="s1">&#39;Bè¡Œ&#39;</span><span class="p">]]</span> <span class="c1"># å–å¤šè¡Œ</span>
</span></span></code></pre></div><h4 id="2å¯¹éœ€è¦çš„è¡Œåˆ—è¿›è¡Œå¤„ç†">ï¼ˆ2ï¼‰å¯¹éœ€è¦çš„è¡Œåˆ—è¿›è¡Œå¤„ç†<a hidden class="anchor" aria-hidden="true" href="#2å¯¹éœ€è¦çš„è¡Œåˆ—è¿›è¡Œå¤„ç†">#</a></h4>
<h5 id="æ—¶é—´å¤„ç†">æ—¶é—´å¤„ç†<a hidden class="anchor" aria-hidden="true" href="#æ—¶é—´å¤„ç†">#</a></h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#è½¬æ¢å›æ—¥æœŸæ ¼å¼,é»˜è®¤æ˜¯æ¯«ç§’</span>
</span></span><span class="line"><span class="cl"><span class="n">data</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">],</span><span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#ç”Ÿæˆä¸€ä¸ªæ—¶é—´æˆ³</span>
</span></span><span class="line"><span class="cl"><span class="n">now</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</span></span></code></pre></div><h5 id="æŸä¸€åˆ—æ•°æ®è¿›è¡Œå¤„ç†">æŸä¸€åˆ—æ•°æ®è¿›è¡Œå¤„ç†<a hidden class="anchor" aria-hidden="true" href="#æŸä¸€åˆ—æ•°æ®è¿›è¡Œå¤„ç†">#</a></h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">data</span><span class="p">[</span><span class="s1">&#39;xxx&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;è¿™é‡Œç”¨ä¸€ä¸ªåˆ—è¡¨è¡¨è¾¾å¼&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">data</span><span class="p">[</span><span class="s1">&#39;xxx&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;xxx&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">lamdba</span> <span class="n">x</span><span class="p">:</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</span></span></code></pre></div><h5 id="å¯¹äºå­—ç¬¦ä¸²çš„å¤„ç†">å¯¹äºå­—ç¬¦ä¸²çš„å¤„ç†<a hidden class="anchor" aria-hidden="true" href="#å¯¹äºå­—ç¬¦ä¸²çš„å¤„ç†">#</a></h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#å»æ‰é¦–ä½çš„a</span>
</span></span><span class="line"><span class="cl"><span class="n">data</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># æ›¿æ¢</span>
</span></span><span class="line"><span class="cl"><span class="n">data</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="err">ï¼Œ</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</span></span></code></pre></div><h5 id="å°†ç‰¹å®šçš„åˆ—æ‹†åˆ†ååˆå¹¶">å°†ç‰¹å®šçš„åˆ—æ‹†åˆ†ååˆå¹¶<a hidden class="anchor" aria-hidden="true" href="#å°†ç‰¹å®šçš„åˆ—æ‹†åˆ†ååˆå¹¶">#</a></h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">data</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;tempvaluearray&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;tempvaluearray&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">()</span><span class="c1">#å¯ä»¥æŒ‰ç…§æŒ‡å®šçš„è½´å°†dataframeæˆ–è€…seriesæ‹¼æ¥ï¼Œè€Œmergeåªèƒ½æ‹¼æ¥ä¸¤ä¸ªè¡¨</span>
</span></span><span class="line"><span class="cl"><span class="n">axis</span> <span class="c1">#0ï¼šä¸Šä¸‹æ‹¼æ¥ 1ï¼šå·¦å³æ‹¼æ¥</span>
</span></span><span class="line"><span class="cl"><span class="c1">#drop()çš„å‚æ•°axisåœ¨åˆ é™¤ç‰¹å®šçš„ä¸€è¡Œä¸º1</span>
</span></span></code></pre></div><h5 id="æ‰¹é‡ä¿®æ”¹åˆ—åç§°">æ‰¹é‡ä¿®æ”¹åˆ—åç§°<a hidden class="anchor" aria-hidden="true" href="#æ‰¹é‡ä¿®æ”¹åˆ—åç§°">#</a></h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">data</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">dic</span><span class="p">)</span><span class="c1">#å¯ä»¥å†™ä¸€ä¸ªå­—å…¸è¿›è¡Œæ›¿æ¢</span>
</span></span></code></pre></div><h5 id="è®¡ç®—æ—¶ä¿ç•™å°æ•°">è®¡ç®—æ—¶ä¿ç•™å°æ•°<a hidden class="anchor" aria-hidden="true" href="#è®¡ç®—æ—¶ä¿ç•™å°æ•°">#</a></h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="s1">&#39;</span><span class="si">%.3f</span><span class="s1">&#39;</span><span class="o">%</span><span class="mf">0.0065</span> <span class="c1">#ä¿ç•™3ä½å°æ•°</span>
</span></span><span class="line"><span class="cl"><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">%.3f</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">-</span><span class="mi">1000</span><span class="p">)</span><span class="o">/</span><span class="mi">1000</span><span class="p">))</span>
</span></span></code></pre></div><h5 id="è°ƒæ•´åˆ—é¡ºåº">è°ƒæ•´åˆ—é¡ºåº<a hidden class="anchor" aria-hidden="true" href="#è°ƒæ•´åˆ—é¡ºåº">#</a></h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#å…ˆå–å‡ºæ¥å†æ’å…¥</span>
</span></span><span class="line"><span class="cl"><span class="n">A</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">],</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">data</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>
</span></span></code></pre></div><h5 id="ä¸€ä¸ªå­—ç¬¦ä¸²åˆ’åˆ†çš„å‡½æ•°">ä¸€ä¸ªå­—ç¬¦ä¸²åˆ’åˆ†çš„å‡½æ•°<a hidden class="anchor" aria-hidden="true" href="#ä¸€ä¸ªå­—ç¬¦ä¸²åˆ’åˆ†çš„å‡½æ•°">#</a></h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># å¯¹äºæ•°æ®ä¸º[12ï¼Œ23ï¼Œ45ï¼Œ12]ç±»ä¼¼çš„æ•°æ®ï¼Œå…¶ä¸­ä¸èƒ½æ˜¯å­—ç¬¦ä¸²</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">split_col</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;æ‹†åˆ†æˆåˆ—
</span></span></span><span class="line"><span class="cl"><span class="s2">    :param data: åŸå§‹æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="s2">    :param columns: æ‹†åˆ†çš„åˆ—å
</span></span></span><span class="line"><span class="cl"><span class="s2">    :type data: pandas.core.frame.DataFrame
</span></span></span><span class="line"><span class="cl"><span class="s2">    :type columns: list
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">new_col</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">max_len</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="n">new_col</span><span class="o">.</span><span class="n">values</span><span class="p">)))</span>  <span class="c1"># æœ€å¤§é•¿åº¦</span>
</span></span><span class="line"><span class="cl">        <span class="n">new_col</span> <span class="o">=</span> <span class="n">new_col</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="n">max_len</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span>  <span class="c1"># è¡¥ç©ºå€¼ï¼ŒNoneå¯æ¢æˆnp.nan</span>
</span></span><span class="line"><span class="cl">        <span class="n">new_col</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">new_col</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span><span class="o">.</span><span class="n">T</span>  <span class="c1"># è½¬ç½®</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">new_col</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">data</span><span class="p">[</span><span class="n">c</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span> <span class="o">=</span> <span class="n">j</span>
</span></span></code></pre></div><h5 id="å»é‡">å»é‡<a hidden class="anchor" aria-hidden="true" href="#å»é‡">#</a></h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">df_unique</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">],</span> <span class="n">keep</span><span class="o">=</span><span class="s1">&#39;last&#39;</span><span class="p">)</span> <span class="c1"># æ ¹æ®Aå»é‡åªç•™ä¸‹æœ€åä¸€æ¬¡å‡ºç°çš„</span>
</span></span></code></pre></div><h5 id="éš”è¡Œå–æ•°æ®">éš”è¡Œå–æ•°æ®<a hidden class="anchor" aria-hidden="true" href="#éš”è¡Œå–æ•°æ®">#</a></h5>
<p>æ–¹æ³•1ï¼šæ¯éš”20è¡Œå–æ•°,æŠŠæ¯20è¡Œçš„idå–å‡ºæ¥</p>
<pre tabindex="0"><code>a=[]
for i in range(0,len(df),20): 	
    a.append(i) 

new_df= df.iloc[a]
</code></pre><p>æ–¹æ³•2ï¼šç›´æ¥è°ƒç”¨read_csv()é‡Œçš„å‚æ•°skiprows</p>
<pre tabindex="0"><code>df = pd.read_csv(&#39;test.csv&#39;,header = None,skiprows=lambda x: x &gt; 0 and x % 20 != 0)
df
</code></pre><h3 id="6éå†å’Œæ±‚å€¼">6.éå†å’Œæ±‚å€¼<a hidden class="anchor" aria-hidden="true" href="#6éå†å’Œæ±‚å€¼">#</a></h3>
<ol>
<li>
<p>éå†</p>
<pre tabindex="0"><code>for name,group in grouped_single:  
	print(name)    
	display(group.head())
</code></pre></li>
<li>
<p>ç»„å†…æ±‚å‡å€¼ï¼Œæœ€å¤§å€¼ï¼Œæœ€å°å€¼ç­‰ç­‰</p>
</li>
</ol>
<pre tabindex="0"><code>df.groupby(&#39;A&#39;)[&#39;B&#39;].mean()
</code></pre><ol start="3">
<li>aggè‡ªå®šä¹‰å†…ç½®å‡½æ•°</li>
</ol>
<pre tabindex="0"><code>df.groupby(&#39;A&#39;)[&#39;B&#39;].agg(fun())
</code></pre><ul>
<li>
<p>æ•´åˆï¼ˆAggregationï¼‰â€”â€”å³åˆ†ç»„è®¡ç®—ç»Ÿè®¡é‡ï¼ˆå¦‚æ±‚å‡å€¼ã€æ±‚æ¯ç»„å…ƒç´ ä¸ªæ•°ï¼‰</p>
</li>
<li>
<p>å˜æ¢ï¼ˆTransformationï¼‰â€”â€”å³åˆ†ç»„å¯¹æ¯ä¸ªå•å…ƒçš„æ•°æ®è¿›è¡Œæ“ä½œï¼ˆå¦‚å…ƒç´ æ ‡å‡†åŒ–ï¼‰</p>
</li>
<li>
<p>è¿‡æ»¤ï¼ˆFiltrationï¼‰â€”â€”å³æŒ‰ç…§æŸäº›è§„åˆ™ç­›é€‰å‡ºä¸€äº›ç»„ï¼ˆå¦‚é€‰å‡ºç»„å†…æŸä¸€æŒ‡æ ‡å°äº50çš„ç»„ï¼‰</p>
</li>
</ul>
<h3 id="7ä¸¾ä¾‹åˆ†ç»„ç»Ÿè®¡æ¬¡æ•°æˆ–è€…é¢‘æ•°">7.ä¸¾ä¾‹ï¼šåˆ†ç»„ç»Ÿè®¡æ¬¡æ•°æˆ–è€…é¢‘æ•°<a hidden class="anchor" aria-hidden="true" href="#7ä¸¾ä¾‹åˆ†ç»„ç»Ÿè®¡æ¬¡æ•°æˆ–è€…é¢‘æ•°">#</a></h3>
<p>â‘ å…ˆæ’åºï¼Œå†åˆ†ç»„ï¼ŒåŠ ä¸Šfirst()å°±æ˜¯å–æœ€å¤§å€¼ã€‚</p>
<p>è‹¥Bæ˜¯ç§ç±»ï¼ŒCæ˜¯æ—¶é—´ï¼Œå°±æ˜¯å…ˆæŒ‰ç§ç±»åˆ†ç»„ï¼Œå†æŒ‰æ—¶é—´åˆ†ç»„ï¼Œå–Aæœ€å¤§çš„æƒ…å†µã€‚</p>
<pre tabindex="0"><code>df1=df.sort_values(&#39;A&#39;, ascending=False).groupby([&#39;B&#39;,&#39;C&#39;], as_index=False).first()
</code></pre><p>â‘¡applyæ–¹æ³•(groupby+applyè¿™æ ·çš„å†™æ³•æ¯”ä¹‹å‰å†™å¾ªç¯è¦å¿«å¾ˆå¤š)</p>
<p>å…ˆåˆ†ç»„å†å¯¹Aå±æ€§è¿›è¡Œæ•°é‡ç»Ÿè®¡ï¼ŒåŠ ä¸Šheadï¼ˆ1ï¼‰å–æœ€å¤§å€¼</p>
<p>éœ€è¦åŠ ä¸Šreset_index,æ—¶æœŸæ‰å¹³åŒ–ï¼ŒåŸæ¥çš„indexå˜æˆæ•°æ®åˆ—ï¼Œä¿ç•™ä¸‹æ¥</p>
<pre tabindex="0"><code>df2=df.groupby(&#39;B&#39;)[&#39;A&#39;].apply(lambda x: x.value_counts(normalize=True).head(1)).to_frame().reset_index()
</code></pre><p>ä¸¾ä¸ªä¾‹å­ï¼šç»Ÿè®¡æ•°å­¦æˆç»©å‰äº”åçš„å­¦ç”Ÿ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)[:</span><span class="mi">5</span><span class="p">])</span><span class="err">`</span>
</span></span></code></pre></div><h4 id="1-value_countsæ–¹æ³•">1. value_counts()æ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#1-value_countsæ–¹æ³•">#</a></h4>
<p>éœ€è¦åŠ ä¸Šunstack()å°†å…¶å±•å¼€ï¼Œå¦åˆ™æ˜¯ä¸€ä¸ªåºåˆ—ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)[</span><span class="s1">&#39;B&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span>
</span></span></code></pre></div><h4 id="2dataframeplotå‡½æ•°">2.DataFrame.plotå‡½æ•°<a hidden class="anchor" aria-hidden="true" href="#2dataframeplotå‡½æ•°">#</a></h4>
<p>ç”»åœ¨ä¸€ä¸ªå­å›¾é‡Œ</p>
<p>pd.DateFrame.plot(kind = &lsquo;scatter&rsquo;)</p>
<pre tabindex="0"><code>ax=v1.plot.scatter(x=&#39;C&#39;,y=&#39;D&#39;,label=&#39;D&#39;,title=i,alpha=0.4,)
v1.plot.scatter(x=&#39;C&#39;,y=&#39;E&#39;,c=&#39;r&#39;,title=i,alpha=0.4,ax=ax,label=&#39;E&#39;)
</code></pre>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/zh/tags/machine-learning/">Machine Learning</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span><a href="https://fishdel.github.io/">Â©2024 Yuuuu&rsquo;s Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
